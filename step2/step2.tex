\ochapter{ステップ2：チャットアプリのインポートと実行}

このCodeLabは，カスタムチャットアプリケーションを，順を追って説明します．
あなたはこのチャットアプリを今エディタに読み込んで，クライアントとサーバーのDartアプリの両方を実行する方法を学習します．

\section{目標}

\begin{enumerate}
\item Dartエディタに既存のコードを読み込みます．
\item 完成したDartライブチャットアプリを実行します．
\begin{enumerate}
\item コマンドラインアプリケーションを実行します．
\item Dartiumアプリを実行します．
\end{enumerate}
\item 実行中のプロセスを確認します．
\item コンソール出力を読んで消去します．
\item 実行中のプロセスを閉じます．
\end{enumerate}

\section{ウォークスルー}

\subsection{CodeLabで利用する教材のダウンロード}\footnote{注:このセクションはGoogle IO 2012ではUSBメモリで教材が配布されたため，USBメモリから取得するように書かれていた章をWebからダウンロードするように書き換えたセクションです．}

Dartの主要な機能を効率良く学ぶことができるよう，このCodeLabでは0から書くのではなくベースとなるコードが準備されています．そのコードは下のURLのGithubリポジトリからダウンロードできます．

\vspace{5mm}
\url{https://github.com/dart-lang/io-2012-dart-code-lab}
\vspace{5mm}

Gitを使われたことがなくてもGitについてよく分からなくても，Zipと書かれたボタンを押すことで，リポジトリの内容をZipファイルでダウンロードすることができます．

\img{step2/downloadcodes.png}

\subsection{DartエディタでDartチャットを開く}

エディタに先程ダウンロードしてきたCodelabのサンプルプロジェクトをロードします．\verb|File > Open Folder|からフォルダを選択し開くことができます．先程ダウンロードしたフォルダ(dartchatフォルダ)を選択し，開いてください．

\img{step2/img_19.jpg}

あなたは，エディタ内の新しいdartchatプロジェクトを見るでしょう．

\img{step2/img_20.jpg}

\subsection{Dartチャットサンプルの完成版の起動します．}

サンプルチャットアプリケーションは，クライアントとサーバーコンポーネントの両方があります．最初にサーバーを実行します．Dartエディタの左側のファイルビューにおいて，dartchatディレクトリ内で，\verb|dartchat > finished > chat-server.dart|と（カーソルを）移動します．chatserver.dartを右クリックして　そしてRunを選択します．

\img{step2/img_21.jpg}

お使いのエディタの下部にチャットserver.dartコンソール出力ウィンドウを確認することにより，サーバーが稼働していることを確認します．''listening for connections on 1337(1337ポートで接続を待っています．)''という表示されるはずです．

\img{step2/img_22.jpg}

次に，クライアントを実行します．クライアントのディレクトリに移動し，そして同じ方法でチャットclient.dartファイルを実行します．

\img{step2/img_23.jpg}

Dartiumがどのようにチャット・アプリが開くか注意してください．チャットウィンドウに''[system]: Connected'' (接続しました）のメッセージを探して，チャット・クライアントがサーバーに接続していることを確かめてください

\img{step2/img_24.jpg}

適切にチャットをするために，もう一つのタブを開けてください．''Dart Chat''タブを右クリックして，''Duplicate''を選択してください．

\imgw{step2/img_25.jpg}

新しいタブをそれ自身のウィンドウにドラッグしてください．二つのタブの間にメッセージを送信して試してみてください．
もっと楽しむために，より多くのクライアントを加えてみてください．

\imgw{step2/img_26.jpg}

\subsection{デバッガー・ビューとコンソール出力}

Dartエディタに戻り，トップレベルメニューの\verb|Tools > Debugger|を選択します．あなたの開始したこのリストの二つのプロセスは，サーバーとクライアントを示しています

\imgw{step2/img_27.jpg}

Dartエディタの下部にある2つのビューにおいて，chat-server.server.dartとDartiumが起動しています．各ビューは，それぞれのプロセスからの出力を持っています．

\img{step2/img_28.jpg}

コンソール出力を消去するには，コンソール出力の表示の右上にあるグレーのXアイコンをクリックします．プロセスを止めるために，コンソール出力表示の右上にある赤いボックスをクリックします．赤いボックスをクリックした後，デバッガがプロセスが止ったことを示すために（表示が）更新されていることに気づくでしょう．
両方のプロセスを止めるときは，まず Dartium launth，そして chatserver.dart を停止します．

\img{step2/img_29.jpg}

\section{上級編}

早く終了した場合，より多くのチャットのサンプルアプリケーションコード探ってみてください．具体的には，チャットサーバーのコードを調査します．isolateを介して，サーバーログがファイルに記録され，あなたはDartライブラリツアーの中でisolateについてさらに知ることができます．

\clearpage
